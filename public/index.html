<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Passive Learning Tracker - Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <h1 class="logo">📚 Passive Learning Tracker</h1>
        <p class="tagline">入力ゼロの学習ログ</p>
      </div>
    </header>

    <!-- Stats Section -->
    <section class="stats-section">
      <div class="stat-card">
        <div class="stat-icon">⏱️</div>
        <div class="stat-info">
          <div class="stat-value" id="total-time">-</div>
          <div class="stat-label">総学習時間</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">📄</div>
        <div class="stat-info">
          <div class="stat-value" id="total-pages">-</div>
          <div class="stat-label">学習ページ数</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">🎥</div>
        <div class="stat-info">
          <div class="stat-value" id="youtube-videos">-</div>
          <div class="stat-label">YouTube動画</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">🧠</div>
        <div class="stat-info">
          <div class="stat-value" id="summarized-logs">-</div>
          <div class="stat-label">AI要約済み</div>
        </div>
      </div>
    </section>

    <!-- Analytics Section -->
    <section class="analytics-section">
      <h2 class="section-title">📈 学習分析</h2>
      
      <!-- Heatmap -->
      <div class="analytics-card">
        <h3 class="analytics-title">学習アクティビティ（過去365日）</h3>
        <div id="heatmap-container" class="heatmap-container">
          <div id="heatmap-loading" class="analytics-loading">読み込み中...</div>
          <div id="heatmap" class="heatmap"></div>
        </div>
      </div>
      
      <!-- Trends Chart -->
      <div class="analytics-card">
        <h3 class="analytics-title">学習時間の推移</h3>
        <div class="chart-controls">
          <button class="chart-btn active" data-period="weekly">週次</button>
          <button class="chart-btn" data-period="monthly">月次</button>
        </div>
        <div class="chart-container">
          <canvas id="trendsChart"></canvas>
        </div>
      </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
      <div class="filter-controls">
        <input 
          type="text" 
          id="search-input" 
          class="search-input" 
          placeholder="🔍 タイトルやURLで検索..."
        >
        <select id="filter-status" class="filter-select">
          <option value="all">すべて</option>
          <option value="summarized">要約済みのみ</option>
          <option value="unsummarized">未要約のみ</option>
        </select>
        <button id="refresh-btn" class="refresh-btn">🔄 更新</button>
      </div>
    </section>

    <!-- Learning Logs Section -->
    <section class="logs-section">
      <h2 class="section-title">📊 学習履歴</h2>
      
      <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>読み込み中...</p>
      </div>
      
      <div id="error" class="error" style="display: none;">
        <p>❌ データの取得に失敗しました</p>
        <button onclick="loadLogs()" class="retry-btn">再試行</button>
      </div>
      
      <div id="logs-container" class="logs-container">
        <!-- Logs will be inserted here by JavaScript -->
      </div>
      
      <div id="no-data" class="no-data" style="display: none;">
        <div class="no-data-icon">📭</div>
        <p>学習ログがありません</p>
        <p class="no-data-hint">Chrome拡張機能をインストールして、Webページを閲覧すると自動的に記録されます</p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <p>© 2024 Passive Learning Tracker | Powered by Gemini AI</p>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
