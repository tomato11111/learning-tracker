# Passive Learning Tracker - Chrome Extension

Chrome拡張機能で学習活動を自動的に追跡します。

## 機能

- 📊 **自動トラッキング**: ページの滞在時間を自動記録
- 🎥 **YouTube対応**: 動画の再生位置を追跡
- 💾 **オフライン対応**: ネットワーク障害時はローカルに保存し、後でリトライ
- 🔄 **自動同期**: 1分ごとにサーバーへデータを送信

## インストール方法

### 1. 開発モードでインストール

1. Chrome を開き、`chrome://extensions/` にアクセス
2. 右上の「デベロッパーモード」を有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. この `extension` フォルダを選択

### 2. サーバーの起動

拡張機能を使用する前に、バックエンドサーバーを起動してください。

```bash
cd /home/user/webapp
npm start
```

サーバーは `http://localhost:3000` で起動します。

## 使い方

1. **自動トラッキング**: インストール後、Webページを閲覧するだけで自動的に記録されます
2. **統計確認**: 拡張機能アイコンをクリックして学習統計を表示
3. **ダッシュボード**: ポップアップから「ダッシュボードを開く」をクリック

## 対応サイト

- ✅ すべてのWebサイト
- ✅ YouTube (動画の再生位置を記録)
- ✅ Udemy, Coursera などの学習プラットフォーム
- ✅ 技術ブログ、ドキュメントサイト

## 設定

デフォルト設定:
- トラッキング間隔: 60秒
- API エンドポイント: `http://localhost:3000/api/track`
- 最小トラッキング時間: 5秒

## トラブルシューティング

### サーバーに接続できない

1. バックエンドサーバーが起動しているか確認
2. `http://localhost:3000/health` にアクセスして接続テスト

### データが記録されない

1. Chrome DevTools のコンソールでエラーを確認
2. 拡張機能のポップアップでステータスを確認
3. 最低5秒以上ページに滞在しているか確認

## ファイル構成

```
extension/
├── manifest.json      # 拡張機能のマニフェスト
├── content.js         # コンテンツスクリプト（トラッキング処理）
├── background.js      # バックグラウンドサービスワーカー
├── popup.html         # ポップアップUI
├── popup.js           # ポップアップロジック
└── icons/            # アイコン画像
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

## 開発

### デバッグ

1. `chrome://extensions/` で拡張機能の「詳細」をクリック
2. 「サービスワーカー」セクションで「inspect」をクリック
3. コンソールでログを確認

### ローカルストレージの確認

```javascript
chrome.storage.local.get(null, (data) => console.log(data));
```

## プライバシー

- 収集データ: URL、ページタイトル、滞在時間のみ
- ページの内容は収集しません
- すべてのデータはローカルサーバーに保存されます
